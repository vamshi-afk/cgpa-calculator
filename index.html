<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GPA Toolkit</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{background:#0f1115;color:#e6e6e6;}
.container{max-width:720px;}
.card{background:#151922;border:1px solid #232838;}
.nav-tabs{border:none;background:#121722;border-radius:10px;padding:4px;}
.nav-tabs .nav-item{width:50%;}
.nav-tabs .nav-link{border:none;border-radius:8px;color:#aab0c0;padding:10px 0;}
.nav-tabs .nav-link.active{background:#1b2233;color:#fff;box-shadow:inset 0 0 0 1px #2a3042;}
.form-control,.form-select{background:#0f1115;border:1px solid #2a3042;color:#e6e6e6;}
.form-control:focus,.form-select:focus{border-color:#4c7dff;box-shadow:none;}
.alert-success{background:#143022;border:none;color:#6ee7b7;}
.alert-info{background:#10263f;border:none;color:#7dd3fc;}
.tab-pane:not(.show){display:none;}
</style>
</head>

<body>

<div class="container mt-3">

<h6 class="text-center mb-3">GPA Toolkit</h6>

<ul class="nav nav-tabs nav-fill mb-3">
<li class="nav-item">
<button class="nav-link active" onclick="switchTab(event,'sgpa')">SGPA</button>
</li>
<li class="nav-item">
<button class="nav-link" onclick="switchTab(event,'estimator')">Estimator</button>
</li>
</ul>

<!-- ================= SGPA TAB ================= -->
<div id="sgpaTab" class="card">
<div class="card-body">

<div class="d-flex justify-content-between align-items-center mb-2">
<small class="text-secondary">Subjects</small>

<div class="btn-group" role="group">

<input type="radio" class="btn-check" name="subjectCount" id="sub5" checked>
<label class="btn btn-outline-primary" for="sub5" onclick="setSubjects(5)">5</label>

<input type="radio" class="btn-check" name="subjectCount" id="sub6">
<label class="btn btn-outline-primary" for="sub6" onclick="setSubjects(6)">6</label>

<input type="radio" class="btn-check" name="subjectCount" id="sub7">
<label class="btn btn-outline-primary" for="sub7" onclick="setSubjects(7)">7</label>

<input type="radio" class="btn-check" name="subjectCount" id="sub8">
<label class="btn btn-outline-primary" for="sub8" onclick="setSubjects(8)">8</label>

</div>

</div>

<hr>

<div id="subjects"></div>

<button class="btn btn-primary w-100 mt-2" onclick="calculateSGPA()">Calculate SGPA</button>

<div id="sgpaResult" class="alert alert-success mt-3 d-none"></div>

</div>
</div>

<!-- ================= ESTIMATOR TAB ================= -->
<div id="estimatorTab" class="card d-none">
<div class="card-body">

<input id="currentCgpa" type="number" step="0.01" class="form-control mb-2" placeholder="Current CGPA">
<input id="currentCredits" type="number" step="1" class="form-control mb-2" placeholder="Total Credits">
<input id="semCredits" type="number" step="1" class="form-control mb-2" placeholder="Semester Credits">
<input id="targetCgpa" type="number" step="0.01" class="form-control mb-2" placeholder="Target CGPA">

<button class="btn btn-success w-100" onclick="calculateEstimator()">Required SGPA</button>

<div id="estimatorResult" class="alert alert-info mt-3 d-none"></div>

</div>
</div>

</div>

<script>
const gradePoints={S:10,"A+":9,A:8,"B+":7,B:6,C:5,P:4,D:2,E:1,NC:0};

// ================= TAB SWITCH =================
function switchTab(e,tab){
document.querySelectorAll(".nav-link").forEach(t=>t.classList.remove("active"));
e.target.classList.add("active");

document.getElementById("sgpaTab").classList.toggle("d-none",tab!=="sgpa");
document.getElementById("estimatorTab").classList.toggle("d-none",tab!=="estimator");

// Save tab for refresh
localStorage.setItem("activeTab",tab);
}

// ================= SUBJECT GENERATOR =================
function setSubjects(n){
const container=document.getElementById("subjects");
container.innerHTML="";
for(let i=1;i<=n;i++){
container.innerHTML+=`
<div class="row g-2 mb-1">
<div class="col-6">
<input type="number" class="form-control credits" placeholder="Credits ${i}" step="1">
</div>
<div class="col-6">
<select class="form-select grades">
<option>S</option><option>A+</option><option>A</option>
<option>B+</option><option>B</option><option>C</option><option>P</option>
<option>D</option><option>E</option><option>NC</option>
</select>
</div>
</div>`;
}
}

// ================= SGPA =================
function calculateSGPA(){
const credits=[...document.querySelectorAll(".credits")].map(x=>parseFloat(x.value)||0);
const grades=[...document.querySelectorAll(".grades")].map(x=>gradePoints[x.value]);

let totalP=0,totalC=0;
for(let i=0;i<credits.length;i++){
totalP+=credits[i]*grades[i];
totalC+=credits[i];
}
if(!totalC)return;

const sgpa=(totalP/totalC).toFixed(3);
const box=document.getElementById("sgpaResult");
box.innerHTML=`<small>Your SGPA</small><strong class="float-end">${sgpa}</strong>`;
box.classList.remove("d-none");
}

// ================= ESTIMATOR =================
function calculateEstimator(){
const c=parseFloat(currentCgpa.value);
const tc=parseFloat(currentCredits.value);
const sc=parseFloat(semCredits.value);
const t=parseFloat(targetCgpa.value);

if(!c||!tc||!sc||!t)return;

const req=((t*(tc+sc))-(c*tc))/sc;
const val=req.toFixed(3);

let msg="Target achievable";
if(req>10)msg="Target not achievable";
if(req<0)msg="Already achieved";

const box=document.getElementById("estimatorResult");
box.innerHTML=`<strong>${val}</strong><br><small>${msg}</small>`;
box.classList.remove("d-none");
}

// ================= RESTORE TAB AFTER REFRESH =================
const savedTab=localStorage.getItem("activeTab");

if(savedTab==="estimator"){
document.querySelectorAll(".nav-link").forEach(t=>t.classList.remove("active"));
document.querySelectorAll(".nav-link")[1].classList.add("active");
document.getElementById("sgpaTab").classList.add("d-none");
document.getElementById("estimatorTab").classList.remove("d-none");
}

// Default subjects
setSubjects(5);
</script>

</body>
</html>
